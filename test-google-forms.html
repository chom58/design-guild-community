<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Formsé€ä¿¡ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        button {
            background: #5B9BD5;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background: #4A8BC5;
        }
        .log {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            color: green;
            font-weight: bold;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .info {
            color: blue;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Google Formsé€ä¿¡ãƒ†ã‚¹ãƒˆ</h1>
        
        <h2>æ–¹æ³•1: iframeé€ä¿¡ï¼ˆç¾åœ¨ã®å®Ÿè£…ï¼‰</h2>
        <button onclick="testIframeSubmit()">iframeã§ãƒ†ã‚¹ãƒˆé€ä¿¡</button>
        
        <h2>æ–¹æ³•2: ç›´æ¥window.openï¼ˆæ–°ã—ã„ã‚¿ãƒ–ï¼‰</h2>
        <button onclick="testDirectSubmit()">æ–°ã—ã„ã‚¿ãƒ–ã§é€ä¿¡</button>
        
        <h2>æ–¹æ³•3: fetch APIï¼ˆCORSåˆ¶é™ã‚ã‚Šï¼‰</h2>
        <button onclick="testFetchSubmit()">fetch APIã§é€ä¿¡</button>
        
        <h2>æ–¹æ³•4: Google Formså…¬å¼iframeåŸ‹ã‚è¾¼ã¿</h2>
        <button onclick="showGoogleForm()">Google Formã‚’è¡¨ç¤º</button>
        
        <div id="formContainer"></div>
        
        <h2>ğŸ“‹ ãƒ­ã‚°</h2>
        <div id="log" class="log">ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„...</div>
    </div>

    <script>
        const FORM_ID = '1FAIpQLSe8b_ynVU1_TqQuoV472_eVFScWgj2WWaeRWFZDmKjkIKQi7Q';
        const logDiv = document.getElementById('log');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type;
            logDiv.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearLog() {
            logDiv.innerHTML = '';
        }
        
        // æ–¹æ³•1: iframeé€ä¿¡ï¼ˆç¾åœ¨ã®å®Ÿè£…ï¼‰
        function testIframeSubmit() {
            clearLog();
            log('=== iframeé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹ ===', 'info');
            
            const testData = {
                'entry.2019842798': 'ãƒ†ã‚¹ãƒˆå¤ªéƒ',
                'entry.61724704': 'test@example.com',
                'entry.966592544': 'Webãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼',
                'entry.1896235522': '1ã€œ3å¹´',
                'entry.505500388': 'ãƒ†ã‚¹ãƒˆé€ä¿¡ã§ã™',
                'entry.1751089080': 'https://example.com'
            };
            
            const url = `https://docs.google.com/forms/d/e/${FORM_ID}/formResponse`;
            
            log('é€ä¿¡URL: ' + url, 'info');
            log('é€ä¿¡ãƒ‡ãƒ¼ã‚¿: ' + JSON.stringify(testData, null, 2), 'info');
            
            try {
                // iframeä½œæˆ
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.name = 'google_form_iframe';
                document.body.appendChild(iframe);
                
                // ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = url;
                form.target = 'google_form_iframe';
                
                // ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
                Object.keys(testData).forEach(key => {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = testData[key];
                    form.appendChild(input);
                });
                
                document.body.appendChild(form);
                form.submit();
                
                log('ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å®Ÿè¡Œ', 'success');
                
                setTimeout(() => {
                    document.body.removeChild(iframe);
                    document.body.removeChild(form);
                    log('é€ä¿¡å®Œäº†ï¼ˆGoogle Formsã®å›ç­”ã‚¿ãƒ–ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼‰', 'success');
                }, 3000);
                
            } catch (error) {
                log('ã‚¨ãƒ©ãƒ¼: ' + error.message, 'error');
            }
        }
        
        // æ–¹æ³•2: ç›´æ¥window.open
        function testDirectSubmit() {
            clearLog();
            log('=== æ–°ã—ã„ã‚¿ãƒ–ã§é€ä¿¡ãƒ†ã‚¹ãƒˆ ===', 'info');
            
            const params = new URLSearchParams({
                'entry.2019842798': 'ãƒ†ã‚¹ãƒˆæ¬¡éƒ',
                'entry.61724704': 'test2@example.com',
                'entry.966592544': 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',
                'entry.1896235522': '3ã€œ5å¹´',
                'entry.505500388': 'æ–°ã—ã„ã‚¿ãƒ–ã§ãƒ†ã‚¹ãƒˆ',
                'entry.1751089080': 'https://example.org'
            });
            
            const url = `https://docs.google.com/forms/d/e/${FORM_ID}/viewform?${params.toString()}`;
            
            log('URLã‚’é–‹ãã¾ã™: ' + url, 'info');
            window.open(url, '_blank');
            log('æ–°ã—ã„ã‚¿ãƒ–ã§ãƒ•ã‚©ãƒ¼ãƒ ãŒé–‹ãã¾ã—ãŸã€‚æ‰‹å‹•ã§é€ä¿¡ã—ã¦ãã ã•ã„ã€‚', 'success');
        }
        
        // æ–¹æ³•3: fetch API
        async function testFetchSubmit() {
            clearLog();
            log('=== fetch APIé€ä¿¡ãƒ†ã‚¹ãƒˆ ===', 'info');
            log('æ³¨æ„: CORSã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™', 'error');
            
            const formData = new FormData();
            formData.append('entry.2019842798', 'ãƒ†ã‚¹ãƒˆä¸‰éƒ');
            formData.append('entry.61724704', 'test3@example.com');
            formData.append('entry.966592544', 'ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼');
            formData.append('entry.1896235522', '5å¹´ä»¥ä¸Š');
            formData.append('entry.505500388', 'fetchãƒ†ã‚¹ãƒˆ');
            formData.append('entry.1751089080', 'https://example.net');
            
            const url = `https://docs.google.com/forms/d/e/${FORM_ID}/formResponse`;
            
            try {
                log('fetché€ä¿¡é–‹å§‹...', 'info');
                const response = await fetch(url, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                
                log('é€ä¿¡å®Œäº†ï¼ˆno-corsãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚å¿œç­”ã¯ç¢ºèªã§ãã¾ã›ã‚“ï¼‰', 'success');
                log('Google Formsã®å›ç­”ã‚¿ãƒ–ã‚’ç¢ºèªã—ã¦ãã ã•ã„', 'info');
                
            } catch (error) {
                log('ã‚¨ãƒ©ãƒ¼: ' + error.message, 'error');
            }
        }
        
        // æ–¹æ³•4: Google Formså…¬å¼iframe
        function showGoogleForm() {
            clearLog();
            log('=== Google Formså…¬å¼iframeè¡¨ç¤º ===', 'info');
            
            const container = document.getElementById('formContainer');
            container.innerHTML = `
                <iframe src="https://docs.google.com/forms/d/e/${FORM_ID}/viewform?embedded=true" 
                        width="100%" 
                        height="800" 
                        frameborder="0" 
                        marginheight="0" 
                        marginwidth="0">
                    èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...
                </iframe>
            `;
            
            log('Google Formsã‚’ä¸‹ã«è¡¨ç¤ºã—ã¾ã—ãŸ', 'success');
        }
    </script>
</body>
</html>